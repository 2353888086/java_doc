> 什么是AQS

```java
AQS全名：AbstractQueuedSynchronizer抽象的队列式的同步器，是并发容器J.U.C（java.util.concurrent）下locks包内的一个类。它实现了一个FIFO(FirstIn、FisrtOut先进先出)的队列。底层实现的数据结构是一个双向链表。
```

> AQS原理

~~~java
AQS 内部简单来说其实主要是由三部分组成的

1、state 这个状态用来声明对象是否已经被线程占有，状态为 0 表示没有，state > 0则表示已经被其他线程占有

2、当前线程 声明当前占有的线程

3、排队队列 等待占有该对象的线程
~~~

> AQS思想

~~~java
如果被请求的共享资源空闲，
则将当前请求资源的线程状态为有效的工作线程，则次现场拿到将共享资源并设置为锁定状态。
如果被请求的共享资源被占用，那么就需要一套线程阻塞等待以及被唤醒时锁分配的机制，
这个机制AQS是用CLH队列锁实现的，即将暂时获取不到锁的线程加入到队列中。

AQS使用一个int成员变量来表示同步状态，通过内置的FIFO (FirstIn、FisrtOut先进先出)的队列（CLH队列） 队列来完成获取资源线程的排队工作。AQS使用CAS对该同步状态进行原子操作实现对其值的修改。
~~~

